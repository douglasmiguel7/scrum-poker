<nz-water-mark nzContent="work in progress" [nzFont]="{ fontSize: 12 }">
  <nz-layout>
    <!-- page header -->
    <nz-header
      nzTheme="light"
      nz-flex
      nzJustify="space-between"
      nzAlign="center"
    >
      <h2 nz-typography class="!m-0">
        <span nz-icon nzType="fast-forward" nzTheme="outline"></span>
        Scrum Poker
      </h2>
      <div nz-flex nzAlign="center" nzGap="small">
        <nz-avatar nzText="D"></nz-avatar>
        Douglas
      </div>
    </nz-header>

    <nz-divider class="m-0"></nz-divider>

    <!-- page content -->
    <nz-content>
      <!-- page content header -->
      <nz-page-header>
        <nz-page-header-title>Minha mesa</nz-page-header-title>
        <nz-page-header-subtitle>
          criado por {{ createdBy }}
        </nz-page-header-subtitle>

        <nz-page-header-extra>
          <nz-space nzSize="middle">
            <countdown
              *nzSpaceItem
              [config]="countdownConfig"
              (event)="handleTimerEvent($event)"
            />
            <button
              *nzSpaceItem
              nz-button
              nzType="link"
              nz-dropdown
              nzTrigger="click"
              [nzDropdownMenu]="menu"
              [disabled]="countdownStarted"
            >
              <span nz-icon nzType="play-circle" nzTheme="outline"></span>
              Iniciar
              <span nz-icon nzType="down"></span>
            </button>
            <nz-dropdown-menu #menu="nzDropdownMenu">
              <ul nz-menu>
                @for (option of minutesOptions; track option) {
                <li nz-menu-item (click)="handleStartTimer(option)">
                  <a>
                    @if (option == 1) {
                    {{ option }} minuto } @if (option > 1) {
                    {{ option }} minutos }
                  </a>
                </li>
                }
              </ul>
            </nz-dropdown-menu>
            <button
              *nzSpaceItem
              nz-button
              nzType="link"
              class="!p-0"
              (click)="handleAddOneMinute()"
              [disabled]="!countdownStarted"
            >
              <span nz-icon nzType="plus-circle" nzTheme="outline"></span>
              Adicionar 1 minuto
            </button>
            <button
              *nzSpaceItem
              nz-button
              nzType="link"
              class="!p-0"
              (click)="handleRestartTimer()"
              [disabled]="!countdownStarted"
            >
              <span nz-icon nzType="redo" nzTheme="outline"></span>
              Reiniciar
            </button>
            <button
              *nzSpaceItem
              nz-button
              nzType="text"
              nzDanger
              class="!p-0"
              [disabled]="!countdownStarted"
              (click)="handleStopTimer()"
            >
              <span nz-icon nzType="close-circle" nzTheme="outline"></span>
              Parar
            </button>
            <nz-divider
              *nzSpaceItem
              class="!m-0"
              nzType="vertical"
            ></nz-divider>
            <p
              *nzSpaceItem
              class="!m-0"
              nz-typography
              nzCopyable
              [nzCopyText]="inviteLink"
            >
              Copiar link do convite
            </p>
          </nz-space>
        </nz-page-header-extra>
      </nz-page-header>

      <nz-divider class="m-0"></nz-divider>

      <nz-layout>
        <!-- content left side -->
        <nz-sider class="overflow-x-hidden overflow-y-auto">
          <div class="mt-3 pl-5">
            <div>
              <h4>Sentados</h4>
            </div>
            <ul nz-list [nzDataSource]="players">
              @for (player of players; track player) {
              <li nz-list-item nzNoFlex>
                <nz-avatar nzIcon="user"></nz-avatar>
                {{ player }}
              </li>
              }
            </ul>

            <h4>Assistindo</h4>
            <ul nz-list [nzDataSource]="spectators">
              @for (spectator of spectators; track spectator) {
              <li nz-list-item nzNoFlex>
                <nz-avatar nzIcon="user"></nz-avatar>
                {{ spectator }}
              </li>
              }
            </ul>
          </div>
        </nz-sider>

        <!-- content center -->
        <nz-content>
          <div class="h-full" nz-flex nzJustify="center" nzAlign="center">
            <div>content</div>
          </div>
        </nz-content>

        <!-- content right side -->
        <nz-sider class="overflow-x-hidden overflow-y-auto">
          <nz-space nzDirection="vertical" class="mt-3 pr-5" nzSize="small">
            <div *nzSpaceItem>
              <h4>Tarefas</h4>
              <nz-space [nzSplit]="spaceSplit">
                <ng-template #spaceSplit>•</ng-template>

                <span *nzSpaceItem>{{ tasks.length }} tarefas</span>
                <span *nzSpaceItem>{{ points }} pontos</span>
              </nz-space>
            </div>
            <div *nzSpaceItem [class.hidden]="toggleAddAnotherTask">
              <button
                nz-button
                nzType="link"
                class="!p-0"
                (click)="handleToggleAddAnotherTask()"
              >
                <span nz-icon nzType="plus-circle" nzTheme="outline"></span>
                Adicionar outra tarefa
              </button>
            </div>
            <div *nzSpaceItem [class.hidden]="!toggleAddAnotherTask">
              <form nz-form nzLayout="vertical">
                <nz-form-item>
                  <nz-form-label nzRequired nzLabelWrap>Título</nz-form-label>
                  <nz-form-control>
                    <input nz-input formControlName="title" />
                  </nz-form-control>
                </nz-form-item>
                <nz-form-item>
                  <nz-form-label nzLabelWrap>Link</nz-form-label>
                  <nz-form-control>
                    <input nz-input formControlName="link" />
                  </nz-form-control>
                </nz-form-item>
              </form>
              <div nz-flex nzJustify="space-between">
                <button
                  nz-button
                  nzType="link"
                  nzDanger
                  class="!p-0"
                  (click)="handleToggleAddAnotherTask()"
                >
                  Cancelar
                </button>
                <button nz-button nzType="link" class="!p-0">Salvar</button>
              </div>
            </div>
            <div *nzSpaceItem>tasks</div>
          </nz-space>
        </nz-sider>
      </nz-layout>
    </nz-content>

    <nz-divider class="m-0"></nz-divider>

    <!-- page footer -->
    <nz-footer nz-flex nzJustify="center" nzGap="large">
      @for (card of cards; track card) {
      <button
        class="overflow-hidden !p-0 !w-10 !h-16"
        nz-button
        nzSize="large"
        nzType="default"
      >
        {{ card }}
      </button>
      }

      <button
        class="overflow-hidden !p-0 !w-10 !h-16"
        nz-button
        nzType="default"
        nzSize="large"
      >
        <span nz-icon nzType="question" nzTheme="outline"></span>
      </button>

      <button
        class="overflow-hidden !p-0 !w-10 !h-16"
        nz-button
        nzType="default"
        nzSize="large"
      >
        <span nz-icon nzType="coffee" nzTheme="outline"></span>
      </button>
    </nz-footer>
  </nz-layout>
</nz-water-mark>
